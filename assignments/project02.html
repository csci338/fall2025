<!doctype html>
<html lang="en">
    <head>
            <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/fall2025/assets/images/favicon.ico" type="image/x-icon">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>Full Stack Application: Movie Recommendation System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="/fall2025/assets/main.css">
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163192686-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-163192686-1');
    </script>
    </head>
    <body class="two-column">
        <!-- banner -->
<header>
    <section>
        <h1 class="desktop"><a href="/fall2025/">CSCI 338: Fall 2025</a></h1>
        <h2 class="desktop">Software Engineering</h2>
        <a class="mobile" href="#">
            <i class="menu-toggle fas fa-bars"></i>
        </a>
        <h1 class="mobile">CSCI 338: Fall 2025</h1>
    </section>
    <img src="https://communication.unca.edu/wp-content/themes/tin/assets/logo.svg" />
</header>
        <nav>
    <ul>
        <li ><a href="/fall2025/syllabus/">Syllabus</a>
        </li>
        <li ><a
                href="/fall2025/">Schedule</a></li>
        <li class="active" ><a
                href="/fall2025/assignments/">Assignments</a></li>
        <li ><a
                href="/fall2025/resources/">Resources</a></li>
        <li ><a href="/fall2025/repos/">Repos</a>
        </li>
        <li><a href="https://drive.google.com/drive/folders/1iI-Iz85UpjGyuu9q_reuq4vT6hC4AEQq?usp=drive_link"
                target="_blank">Videos</a></li>
    </ul>
</nav>
        <main>
            <aside>
                
                
                <ol class="side-menu">
  <li><a href="#id_set-up">Set Up</a>
    <ol>
      <li><a href="#id_1-make-a-new-repo">1. Make a new repo</a></li>
      <li><a href="#id_2-set-up-your-backend">2. Set up your backend</a>
        <ol>
          <li><a href="#id_21-start-with-the-lab-8-starter-code">2.1. Start with the Lab 8 starter code</a></li>
          <li><a href="#id_22-add-new-dependencies">2.2. Add new dependencies</a></li>
          <li><a href="#id_23-understanding-fastapi-basics">2.3. Understanding FastAPI Basics</a></li>
          <li><a href="#id_24-add-a-fast-api-web-server">2.4. Add a Fast API Web Server</a></li>
          <li><a href="#id_25-test">2.5. Test</a></li>
          <li><a href="#id_what-just-happened">What just happened?</a></li>
        </ol>
      </li>
      <li><a href="#id_3-set-up-your-frontend-react">3. Set up your frontend (React)</a>
        <ol>
          <li><a href="#id_31-create-the-ui-skeleton">3.1. Create the UI skeleton</a></li>
          <li><a href="#id_32-convert-your-frontend-to-a-react-project">3.2. Convert your frontend to a React project</a></li>
          <li><a href="#id_33-create-a-react-component-to-query-the-films-table">3.3. Create a React component to query the films table</a></li>
          <li><a href="#id_what-just-happened-1">What just happened?</a></li>
        </ol>
      </li>
      <li><a href="#id_your-tasks">Your Tasks</a>
        <ol>
          <li><a href="#id_1-search-functionality">1. Search Functionality</a></li>
          <li><a href="#id_2-bookmark-management">2. Bookmark Management</a></li>
          <li><a href="#id_3-testing">3. Testing</a></li>
          <li><a href="#id_4-code-quality">4. Code Quality</a></li>
          <li><a href="#id_5-cicd-pipeline">5. CI/CD Pipeline</a></li>
          <li><a href="#id_submission-checklist">Submission Checklist</a></li>
        </ol>
      </li>
    </ol>
  </li>
</ol>

            </aside>
            <article>
                

    
    <h1>
        <a href="../assignments/">Assignments</a> >
        Project 2: Full Stack Application: Movie Recommendation System
    </h1>
    
 
                <p>
    
        Due on Fri, 12/05 @ 11:59PM.
    
    
        20 Points.
    
    
</p>

<h1 id="id_set-up">Set Up</h1>
<h2 id="id_1-make-a-new-repo">1. Make a new repo</h2>
<ol>
  <li>Create a new folder outside of your <code class="language-plaintext highlighter-rouge">class-exercises-2025</code> folder called <code class="language-plaintext highlighter-rouge">project02</code>. This folder will be a stand-alone repo, so make sure this folder isn’t nested within another folder that is also under version control.</li>
  <li>Initialize a new repo (review past labs if you forgot how to do this).</li>
  <li>Create a <code class="language-plaintext highlighter-rouge">.gitignore</code> file that excludes <code class="language-plaintext highlighter-rouge">.venv</code>, <code class="language-plaintext highlighter-rouge">node_modules</code>, and <code class="language-plaintext highlighter-rouge">*.pyc</code>, along with any other files you don’t want to check into version control.</li>
  <li>Finally, create a new repo on GitHub and push your main branch to GitHub.</li>
</ol>

<h2 id="id_2-set-up-your-backend">2. Set up your backend</h2>

<h3 id="id_21-start-with-the-lab-8-starter-code">2.1. Start with the Lab 8 starter code</h3>
<ol>
  <li>Copy your solution from <code class="language-plaintext highlighter-rouge">lab08</code> into your <code class="language-plaintext highlighter-rouge">project02</code> folder.</li>
  <li>Rename it to <code class="language-plaintext highlighter-rouge">backend</code></li>
  <li>Delete the following files / directories from your <code class="language-plaintext highlighter-rouge">backend</code> directory (if they exist):
    <ul>
      <li><code class="language-plaintext highlighter-rouge">__pycache__</code></li>
      <li><code class="language-plaintext highlighter-rouge">.venv</code></li>
      <li><code class="language-plaintext highlighter-rouge">poetry.lock</code></li>
      <li><code class="language-plaintext highlighter-rouge">orm_samples.py</code></li>
      <li><code class="language-plaintext highlighter-rouge">answers_orm.py</code></li>
      <li><code class="language-plaintext highlighter-rouge">answers_sql.md</code></li>
    </ul>
  </li>
  <li>Your directory structure should now look something like this:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     project02
     ├── .git
     ├── .gitignore
     └── backend
         ├── .gitignore    <span class="c"># it's OK if you have multiple .gitignore files</span>
         ├── Dockerfile
         ├── compose.yaml
         ├── init.sh
         ├── models        <span class="c"># should have a bunch of python modules</span>
         └── pyproject.toml
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="id_22-add-new-dependencies">2.2. Add new dependencies</h3>
<ol>
  <li>On the command line, navigate into your <code class="language-plaintext highlighter-rouge">backend</code> directory and add some new dependencies:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> poetry add "sqlalchemy[asyncio]^2.0.29"
 poetry add asyncpg
 poetry add fastapi
 poetry add "uvicorn[standard]"
 poetry add "pydantic^2.0"
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="id_23-understanding-fastapi-basics">2.3. Understanding FastAPI Basics</h3>

<p>Before we write the code, let’s understand what FastAPI does:</p>

<ul>
  <li><strong>FastAPI</strong> is a web framework that lets you create APIs (Application Programming Interfaces)</li>
  <li>An API is like a menu at a restaurant - it lists what you can order (endpoints) and what you’ll get back (responses)</li>
  <li>When a user visits a URL like <code class="language-plaintext highlighter-rouge">http://127.0.0.1:8000/films</code>, FastAPI:
    <ol>
      <li>Receives the request</li>
      <li>Calls the function associated with that URL</li>
      <li>The function queries the database</li>
      <li>Returns data as JSON (which your React frontend can read)</li>
    </ol>
  </li>
</ul>

<p><strong>Key Concepts You’ll See:</strong></p>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">@app.get("/films")</code></strong> - This is a “decorator” that tells FastAPI: “When someone visits /films, run this function”</li>
  <li><strong><code class="language-plaintext highlighter-rouge">async def</code></strong> - These are asynchronous functions that can wait for database operations without blocking</li>
  <li><strong><code class="language-plaintext highlighter-rouge">Depends(get_db)</code></strong> - This automatically gives each endpoint a database connection</li>
  <li><strong>Pydantic models</strong> - These define what your API responses will look like (like a contract)</li>
</ul>

<h3 id="id_24-add-a-fast-api-web-server">2.4. Add a Fast API Web Server</h3>
<p>Within your <code class="language-plaintext highlighter-rouge">backend</code> folder, create a new file called <code class="language-plaintext highlighter-rouge">server.py</code> and paste the following code into it:</p>

<div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="sh">"""</span><span class="s">
Simple FastAPI Starter - Film API
==================================

This is a minimal FastAPI example perfect for beginners.
It shows the basic structure of a REST API with database access.

HOW IT WORKS:
1. Client (your React app) makes a request to a URL (e.g., /films)
2. FastAPI finds the function decorated with @app.get(</span><span class="sh">"</span><span class="s">/films</span><span class="sh">"</span><span class="s">)
3. That function uses the database connection to query data
4. The function returns data, which FastAPI converts to JSON
5. The JSON is sent back to the client
</span><span class="sh">"""</span>

<span class="c1"># Step 1: Import what we need
</span><span class="kn">from</span> <span class="n">fastapi</span> <span class="kn">import</span> <span class="n">FastAPI</span><span class="p">,</span> <span class="n">Depends</span><span class="p">,</span> <span class="n">HTTPException</span>
<span class="kn">from</span> <span class="n">fastapi.middleware.cors</span> <span class="kn">import</span> <span class="n">CORSMiddleware</span>
<span class="kn">from</span> <span class="n">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">AsyncSession</span><span class="p">,</span> <span class="n">create_async_engine</span>
<span class="kn">from</span> <span class="n">sqlalchemy.orm</span> <span class="kn">import</span> <span class="n">sessionmaker</span>
<span class="kn">from</span> <span class="n">sqlalchemy.future</span> <span class="kn">import</span> <span class="n">select</span>
<span class="kn">from</span> <span class="n">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">from</span> <span class="n">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span>

<span class="kn">from</span> <span class="n">models</span> <span class="kn">import</span> <span class="n">Film</span>

<span class="c1"># Step 2: Connect to the database
# This string tells SQLAlchemy where to find your database
# Format: postgresql+asyncpg://username:password@host:port/database_name
</span><span class="n">DATABASE_URL</span> <span class="o">=</span> <span class="sh">"</span><span class="s">postgresql+asyncpg://postgres:postgres@localhost:5433/dvdrental</span><span class="sh">"</span>

<span class="c1"># Create the database engine - this manages the connection pool
# Think of it as a "factory" that creates database connections
</span><span class="n">engine</span> <span class="o">=</span> <span class="nf">create_async_engine</span><span class="p">(</span><span class="n">DATABASE_URL</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="c1"># Create a session factory - this creates individual database sessions
# Each request will get its own session to query the database
</span><span class="n">AsyncSessionLocal</span> <span class="o">=</span> <span class="nf">sessionmaker</span><span class="p">(</span>
    <span class="n">engine</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="n">AsyncSession</span><span class="p">,</span> <span class="n">expire_on_commit</span><span class="o">=</span><span class="bp">False</span>
<span class="p">)</span>

<span class="c1"># Step 3: Create a function to get database sessions
# This is called a "dependency" - FastAPI will automatically call this
# for each request and pass the result to your endpoint functions
</span><span class="k">async</span> <span class="k">def</span> <span class="nf">get_db</span><span class="p">():</span>
    <span class="sh">"""</span><span class="s">
    Generator function that yields a database session.
    
    The </span><span class="sh">'</span><span class="s">yield</span><span class="sh">'</span><span class="s"> keyword is special - it:
    1. Creates a session when the function is called
    2. Gives it to your endpoint function
    3. Closes the session when the endpoint finishes
    
    This ensures database connections are properly cleaned up.
    </span><span class="sh">"""</span>
    <span class="k">async</span> <span class="k">with</span> <span class="nc">AsyncSessionLocal</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">session</span>  <span class="c1"># Give the session to the endpoint
</span>        <span class="c1"># After the endpoint finishes, the session is automatically closed
</span>
<span class="c1"># Step 4: Define what our API responses will look like
# This is called a "Pydantic model" or "schema"
# It defines the structure of data that will be sent back to clients
</span><span class="k">class</span> <span class="nc">FilmResponse</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    What a film looks like when we send it back to the client.
    
    This is like a contract - it guarantees that any FilmResponse
    will have these exact fields with these types.
    </span><span class="sh">"""</span>
    <span class="n">film_id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>  <span class="c1"># Optional means it can be None
</span>    <span class="n">release_year</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="n">rental_rate</span><span class="p">:</span> <span class="nb">float</span>
    
    <span class="c1"># This tells Pydantic to automatically convert SQLAlchemy models
</span>    <span class="c1"># (like our Film model) into this Pydantic model
</span>    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">from_attributes</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c1"># Step 5: Create the FastAPI app
# This is the main application object - it handles all incoming requests
</span><span class="n">app</span> <span class="o">=</span> <span class="nc">FastAPI</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="sh">"</span><span class="s">Film API</span><span class="sh">"</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="sh">"</span><span class="s">A simple API to get film information</span><span class="sh">"</span>
<span class="p">)</span>

<span class="c1"># Add CORS middleware to allow frontend requests
# CORS (Cross-Origin Resource Sharing) is needed because your React app
# runs on a different port (5173) than your API (8000)
# Without this, browsers would block requests from your frontend
</span><span class="n">app</span><span class="p">.</span><span class="nf">add_middleware</span><span class="p">(</span>
    <span class="n">CORSMiddleware</span><span class="p">,</span>
    <span class="n">allow_origins</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">*</span><span class="sh">"</span><span class="p">],</span>  <span class="c1"># Allows all origins (in production, specify exact URLs)
</span>    <span class="n">allow_credentials</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">allow_methods</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">*</span><span class="sh">"</span><span class="p">],</span>  <span class="c1"># Allows all HTTP methods (GET, POST, etc.)
</span>    <span class="n">allow_headers</span><span class="o">=</span><span class="p">[</span><span class="sh">"</span><span class="s">*</span><span class="sh">"</span><span class="p">],</span>  <span class="c1"># Allows all headers
</span><span class="p">)</span>

<span class="c1"># Step 6: Create our API endpoints
# These are the URLs that clients can visit to get data
</span>
<span class="nd">@app.get</span><span class="p">(</span><span class="sh">"</span><span class="s">/</span><span class="sh">"</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">root</span><span class="p">():</span>
    <span class="sh">"""</span><span class="s">
    Welcome endpoint - the simplest possible endpoint.
    
    When someone visits http://127.0.0.1:8000/, this function runs.
    </span><span class="sh">"""</span>
    <span class="k">return</span> <span class="p">{</span><span class="sh">"</span><span class="s">message</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Welcome to the Film API! Try /films</span><span class="sh">"</span><span class="p">}</span>

<span class="nd">@app.get</span><span class="p">(</span><span class="sh">"</span><span class="s">/films</span><span class="sh">"</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">List</span><span class="p">[</span><span class="n">FilmResponse</span><span class="p">])</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_all_films</span><span class="p">(</span><span class="n">db</span><span class="p">:</span> <span class="n">AsyncSession</span> <span class="o">=</span> <span class="nc">Depends</span><span class="p">(</span><span class="n">get_db</span><span class="p">)):</span>
    <span class="sh">"""</span><span class="s">
    Get all films from the database.
    
    - The @app.get(</span><span class="sh">"</span><span class="s">/films</span><span class="sh">"</span><span class="s">) decorator means: </span><span class="sh">"</span><span class="s">When someone visits /films, run this function</span><span class="sh">"</span><span class="s">
    - response_model tells FastAPI what shape the response will be
    - db: AsyncSession = Depends(get_db) automatically gives us a database connection
    - async def means this function can wait for database operations
    
    Returns: A list of all films in the database
    </span><span class="sh">"""</span>
    <span class="c1"># Query the database - select(Film) means "get all Film records"
</span>    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="nf">select</span><span class="p">(</span><span class="n">Film</span><span class="p">))</span>
    
    <span class="c1"># Get all the films from the result
</span>    <span class="c1"># scalars() extracts the Film objects from the result
</span>    <span class="c1"># all() gets all of them as a list
</span>    <span class="n">films</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="nf">scalars</span><span class="p">().</span><span class="nf">all</span><span class="p">()</span>
    
    <span class="c1"># Return them - FastAPI automatically converts to JSON
</span>    <span class="k">return</span> <span class="n">films</span>

<span class="nd">@app.get</span><span class="p">(</span><span class="sh">"</span><span class="s">/films/{film_id}</span><span class="sh">"</span><span class="p">,</span> <span class="n">response_model</span><span class="o">=</span><span class="n">FilmResponse</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_one_film</span><span class="p">(</span><span class="n">film_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">db</span><span class="p">:</span> <span class="n">AsyncSession</span> <span class="o">=</span> <span class="nc">Depends</span><span class="p">(</span><span class="n">get_db</span><span class="p">)):</span>
    <span class="sh">"""</span><span class="s">
    Get a single film by its ID.
    
    - The {film_id} in the path is a </span><span class="sh">"</span><span class="s">path parameter</span><span class="sh">"</span><span class="s">
    - FastAPI automatically extracts it from the URL and passes it as an argument
    - Example: Visiting /films/5 sets film_id = 5
    
    Returns: The film if found, or a 404 error if not
    </span><span class="sh">"""</span>
    <span class="c1"># Query for the specific film
</span>    <span class="c1"># .where() filters the results to only films with matching film_id
</span>    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">db</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span>
        <span class="nf">select</span><span class="p">(</span><span class="n">Film</span><span class="p">).</span><span class="nf">where</span><span class="p">(</span><span class="n">Film</span><span class="p">.</span><span class="n">film_id</span> <span class="o">==</span> <span class="n">film_id</span><span class="p">)</span>
    <span class="p">)</span>
    
    <span class="c1"># Get the film (or None if not found)
</span>    <span class="c1"># scalar_one_or_none() gets one result, or None if nothing matches
</span>    <span class="n">film</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="nf">scalar_one_or_none</span><span class="p">()</span>
    
    <span class="c1"># If not found, return a 404 error
</span>    <span class="c1"># HTTPException is FastAPI's way of returning error responses
</span>    <span class="k">if</span> <span class="n">film</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nc">HTTPException</span><span class="p">(</span>
            <span class="n">status_code</span><span class="o">=</span><span class="mi">404</span><span class="p">,</span>  <span class="c1"># HTTP status code for "Not Found"
</span>            <span class="n">detail</span><span class="o">=</span><span class="sa">f</span><span class="sh">"</span><span class="s">Film with ID </span><span class="si">{</span><span class="n">film_id</span><span class="si">}</span><span class="s"> not found</span><span class="sh">"</span>
        <span class="p">)</span>
    
    <span class="c1"># Return the film - FastAPI converts it to JSON automatically
</span>    <span class="k">return</span> <span class="n">film</span>

<span class="c1"># Step 7: Run the server
# This code only runs if you execute the file directly (not if imported)
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">"</span><span class="s">__main__</span><span class="sh">"</span><span class="p">:</span>
    <span class="kn">import</span> <span class="n">uvicorn</span>
    <span class="c1"># uvicorn is the web server that runs FastAPI
</span>    <span class="c1"># --reload means it will restart when you change the code
</span>    <span class="n">uvicorn</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="sh">"</span><span class="s">0.0.0.0</span><span class="sh">"</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>

</code></pre></div></div>
<h3 id="id_25-test">2.5. Test</h3>
<ol>
  <li>Before building a new database container, go ahead and delete your old database container (<code class="language-plaintext highlighter-rouge">lab08</code>), which is using the same port (5433).
    <ul>
      <li>Alternatively, you could update your <code class="language-plaintext highlighter-rouge">compose.yaml</code> to map your database to a new port (e.g., 5434) if you want to keep your lab08 container.</li>
    </ul>
  </li>
  <li>On the command line, from within your <code class="language-plaintext highlighter-rouge">backend folder</code>, create a new Docker container that will house your database:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> docker compose up <span class="nt">-d</span>
</code></pre></div>    </div>
  </li>
  <li>Start your web server as follows:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> poetry run uvicorn server:app <span class="nt">--reload</span>
</code></pre></div>    </div>
  </li>
  <li>Test it by navigating to <a href="http://127.0.0.1:8000/docs" target="_blank">http://127.0.0.1:8000/docs</a>, which is the Fast API endpoint tester. It should look something like this:
 <img class="large frame" src="/fall2025/assets/images/projects/p02_ss1.png" /></li>
  <li>Scroll to the <code class="language-plaintext highlighter-rouge">/films</code> endpoint by clicking the “Try it out” button, and then clicking the blue “Execute” button. Scroll down. If you see something like the screenshot below, you did it correctly (note the array of objects representing various films):
 <img class="large frame" src="/fall2025/assets/images/projects/p02_ss2.png" /></li>
</ol>

<blockquote class="info">
  <h3 id="id_what-just-happened">What just happened?</h3>

  <p>You just created your first FastAPI web server! Here’s what each part does:</p>

  <p><strong>The Request Flow:</strong></p>
  <ol>
    <li>A client (like your React app) sends a request to <code class="language-plaintext highlighter-rouge">http://127.0.0.1:8000/films</code></li>
    <li>FastAPI receives the request and looks for a function decorated with <code class="language-plaintext highlighter-rouge">@app.get("/films")</code></li>
    <li>FastAPI automatically calls <code class="language-plaintext highlighter-rouge">get_db()</code> to get a database connection</li>
    <li>Your <code class="language-plaintext highlighter-rouge">get_all_films()</code> function runs, queries the database, and returns the films</li>
    <li>FastAPI automatically converts the Python objects to JSON and sends them back</li>
  </ol>

  <p><strong>Key Concepts:</strong></p>
  <ul>
    <li><strong>Decorators</strong> (<code class="language-plaintext highlighter-rouge">@app.get</code>) - These “register” your functions with FastAPI so it knows which URL triggers which function</li>
    <li><strong>Dependencies</strong> (<code class="language-plaintext highlighter-rouge">Depends(get_db)</code>) - FastAPI automatically calls <code class="language-plaintext highlighter-rouge">get_db()</code> before your endpoint runs, giving you a database connection</li>
    <li><strong>Async/Await</strong> - <code class="language-plaintext highlighter-rouge">async def</code> and <code class="language-plaintext highlighter-rouge">await</code> let your code wait for database operations without blocking other requests</li>
    <li><strong>Pydantic Models</strong> - These define the shape of your responses and automatically convert SQLAlchemy models to JSON</li>
    <li><strong>CORS Middleware</strong> - Allows your React frontend (running on port 5173) to make requests to your API (running on port 8000)</li>
  </ul>

  <p><strong>Why <code class="language-plaintext highlighter-rouge">yield</code> instead of <code class="language-plaintext highlighter-rouge">return</code>?</strong>
The <code class="language-plaintext highlighter-rouge">yield</code> keyword in <code class="language-plaintext highlighter-rouge">get_db()</code> creates a generator. This lets FastAPI:</p>
  <ul>
    <li>Create the database session when your endpoint starts</li>
    <li>Use the session during your endpoint</li>
    <li>Automatically close the session when your endpoint finishes (even if there’s an error)</li>
  </ul>

  <p>This ensures database connections are always properly cleaned up!</p>
</blockquote>

<h2 id="id_3-set-up-your-frontend-react">3. Set up your frontend (React)</h2>
<h3 id="id_31-create-the-ui-skeleton">3.1. Create the UI skeleton</h3>
<ol>
  <li>Create a new folder directly underneath <code class="language-plaintext highlighter-rouge">project02</code> called <code class="language-plaintext highlighter-rouge">frontend</code>.</li>
  <li>Inside of <code class="language-plaintext highlighter-rouge">frontend</code>, we’re going to follow the exact same steps as we did in Lab 9:
    <ol>
      <li>Create the following blank files:
        <ul>
          <li><code class="language-plaintext highlighter-rouge">index.html</code></li>
          <li><code class="language-plaintext highlighter-rouge">styles.css</code></li>
        </ul>
      </li>
      <li>
        <p>Inside of your <code class="language-plaintext highlighter-rouge">index.html</code> file, paste the following code:</p>

        <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cp">&lt;!DOCTYPE html&gt;</span>
 <span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>

 <span class="nt">&lt;head&gt;</span>
     <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
     <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">"viewport"</span> <span class="na">content=</span><span class="s">"width=device-width, initial-scale=1.0"</span><span class="nt">&gt;</span>
     <span class="nt">&lt;title&gt;</span>Film UI<span class="nt">&lt;/title&gt;</span>
     <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"./styles.css"</span><span class="nt">&gt;</span>
 <span class="nt">&lt;/head&gt;</span>

 <span class="nt">&lt;body&gt;</span>
     <span class="nt">&lt;h1&gt;</span>Film UI<span class="nt">&lt;/h1&gt;</span>
     <span class="nt">&lt;p&gt;</span>Here is some text!<span class="nt">&lt;/p&gt;</span>
 <span class="nt">&lt;/body&gt;</span>

 <span class="nt">&lt;/html&gt;</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>Inside of your <code class="language-plaintext highlighter-rouge">styles.css</code> file, paste the following code:</p>

        <div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nt">body</span> <span class="p">{</span>
     <span class="nl">font-family</span><span class="p">:</span> <span class="n">Arial</span><span class="p">,</span> <span class="n">Helvetica</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
     <span class="nl">background-color</span><span class="p">:</span> <span class="nx">navy</span><span class="p">;</span>
     <span class="nl">color</span><span class="p">:</span> <span class="nx">white</span><span class="p">;</span>
 <span class="p">}</span>
</code></pre></div>        </div>
      </li>
    </ol>
  </li>
  <li>When you’re done, preview your HTML page in the browser. If you did it correctly, you should see your HTML, and the background should be navy blue (just like in Lab 9).</li>
</ol>

<h3 id="id_32-convert-your-frontend-to-a-react-project">3.2. Convert your frontend to a React project</h3>
<p>Follow steps #3 and #4 (from Lab 9) to convert your front-end to a react project. When you’re done, your directory structure should look like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>project02
├── .git
├── .gitignore
├── backend
│   ├── .gitignore
│   ├── Dockerfile
│   ├── compose.yaml
│   ├── init.sh
│   ├── models
│   ├── poetry.lock
│   ├── pyproject.toml
│   └── server.py
└── frontend
    ├── index.html
    ├── node_modules
    ├── package-lock.json
    ├── package.json
    ├── src
    │   ├── App.jsx
    │   └── main.jsx
    └── styles.css
</code></pre></div></div>

<p>Then, make sure your frontend runs by running <code class="language-plaintext highlighter-rouge">npm run dev</code> <strong>from within your <code class="language-plaintext highlighter-rouge">frontend</code> directory</strong>. If it worked correctly, you should see this screen when you access <a href="http://localhost:5173/" target="_blank">http://localhost:5173/</a>:</p>

<p><img class="small frame" src="/fall2025/assets/images/projects/p02_ss3.png" /></p>

<h3 id="id_33-create-a-react-component-to-query-the-films-table">3.3. Create a React component to query the films table</h3>
<p>Within <code class="language-plaintext highlighter-rouge">frontend/src</code>, create a new component called <code class="language-plaintext highlighter-rouge">Films.jsx</code> and paste the following code into this component:</p>

<div class="language-jsx highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useState</span><span class="p">,</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">react</span><span class="dl">"</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nf">Films</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">films</span><span class="p">,</span> <span class="nx">setFilms</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">([]);</span>

  <span class="nf">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">async</span> <span class="kd">function</span> <span class="nf">fetchFilms</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">fetch</span><span class="p">(</span><span class="dl">"</span><span class="s2">http://127.0.0.1:8000/films</span><span class="dl">"</span><span class="p">);</span>

      <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">response</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="s2">`HTTP error! status: </span><span class="p">${</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
        <span class="nf">setFilms</span><span class="p">([]);</span>
      <span class="p">}</span>

      <span class="kd">const</span> <span class="nx">filmData</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">response</span><span class="p">.</span><span class="nf">json</span><span class="p">();</span>
      <span class="nf">setFilms</span><span class="p">(</span><span class="nx">filmData</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nf">fetchFilms</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="kd">function</span> <span class="nf">displayFilm</span><span class="p">(</span><span class="nx">filmObj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return </span><span class="p">(</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">key</span><span class="p">=</span><span class="si">{</span><span class="nx">filmObj</span><span class="p">.</span><span class="nx">film_id</span><span class="si">}</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">filmObj</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;</span> (<span class="si">{</span><span class="nx">filmObj</span><span class="p">.</span><span class="nx">release_year</span><span class="si">}</span>)
        <span class="si">{</span><span class="nx">filmObj</span><span class="p">.</span><span class="nx">description</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span><span class="si">{</span><span class="nx">filmObj</span><span class="p">.</span><span class="nx">description</span><span class="si">}</span><span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span><span class="si">}</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Return the JSX:</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">films</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>No films found.<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;;</span>
  <span class="p">}</span>
  <span class="k">return </span><span class="p">(</span>
    <span class="p">&lt;</span><span class="nt">section</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Films<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
      <span class="si">{</span><span class="nx">films</span><span class="p">.</span><span class="nf">map</span><span class="p">((</span><span class="nx">film</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nf">displayFilm</span><span class="p">(</span><span class="nx">film</span><span class="p">))</span><span class="si">}</span>
    <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now, figure out how to utilize this component within <code class="language-plaintext highlighter-rouge">App.jsx</code> based on what you learned in Labs 9 and 10. If you figured it out, you should have a screen that looks something like this:</p>

<p><img class="medium frame" src="/fall2025/assets/images/projects/p02_ss4.png" /></p>

<blockquote class="info">
  <h3 id="id_what-just-happened-1">What just happened?</h3>

  <p>You just connected your React frontend to your FastAPI backend! Here’s how it works:</p>

  <p><strong>The Full-Stack Flow:</strong></p>
  <ol>
    <li><strong>User visits your React app</strong> at <code class="language-plaintext highlighter-rouge">http://localhost:5173/</code></li>
    <li><strong>React component mounts</strong> - The <code class="language-plaintext highlighter-rouge">Films</code> component renders</li>
    <li><strong><code class="language-plaintext highlighter-rouge">useEffect</code> runs</strong> - When the component first loads, it triggers the <code class="language-plaintext highlighter-rouge">fetchFilms()</code> function</li>
    <li><strong>HTTP Request</strong> - <code class="language-plaintext highlighter-rouge">fetch("http://127.0.0.1:8000/films")</code> sends a GET request to your FastAPI server</li>
    <li><strong>FastAPI processes</strong> - Your <code class="language-plaintext highlighter-rouge">/films</code> endpoint queries the database and returns JSON</li>
    <li><strong>React receives data</strong> - The response is converted to JavaScript objects</li>
    <li><strong>State updates</strong> - <code class="language-plaintext highlighter-rouge">setFilms(filmData)</code> updates the component’s state</li>
    <li><strong>UI re-renders</strong> - React automatically re-renders to show the new data</li>
  </ol>

  <p><strong>Key Concepts:</strong></p>
  <ul>
    <li><strong><code class="language-plaintext highlighter-rouge">useEffect</code></strong> - Runs code when the component first loads (or when dependencies change)</li>
    <li><strong><code class="language-plaintext highlighter-rouge">useState</code></strong> - Stores the films data and triggers a re-render when updated</li>
    <li><strong><code class="language-plaintext highlighter-rouge">fetch()</code></strong> - JavaScript’s built-in function for making HTTP requests</li>
    <li><strong><code class="language-plaintext highlighter-rouge">async/await</code></strong> - Lets your code wait for the HTTP request to complete</li>
    <li><strong><code class="language-plaintext highlighter-rouge">.map()</code></strong> - Transforms the array of films into React components</li>
  </ul>

  <p><strong>Why two servers?</strong></p>
  <ul>
    <li><strong>Frontend (port 5173)</strong> - Serves your React app to the browser</li>
    <li><strong>Backend (port 8000)</strong> - Handles database queries and business logic</li>
    <li>This separation allows you to build mobile apps, other frontends, or share your API with others!</li>
  </ul>
</blockquote>

<p>Congratulations! You’ve are well on your way to making a fabulous full-stack application. Now, your job is to enhance this application to meet the requirements. Please read on…</p>

<h2 id="id_your-tasks">Your Tasks</h2>

<h3 id="id_1-search-functionality">1. Search Functionality</h3>
<p>Implement endpoints and UI components that allow users to search films by:</p>
<ul>
  <li><strong>Genre</strong>: Filter films by category (e.g., Action, Comedy, Drama)</li>
  <li><strong>Release Year</strong>: Filter films by year (e.g., all films from 2005)</li>
  <li><strong>Keyword</strong>: Search film titles and descriptions for specific words</li>
</ul>

<p><strong>Backend Requirements:</strong></p>
<ul>
  <li>Create a <code class="language-plaintext highlighter-rouge">/films/search</code> endpoint that accepts query parameters for genre, year, and keyword</li>
  <li>Use SQLAlchemy queries to filter the <code class="language-plaintext highlighter-rouge">Film</code> table based on these criteria</li>
  <li>Return results in the same format as your existing <code class="language-plaintext highlighter-rouge">/films</code> endpoint</li>
</ul>

<p><strong>Frontend Requirements:</strong></p>
<ul>
  <li>Create a search form component with inputs for genre, year, and keyword</li>
  <li>Display search results using your existing film display components</li>
  <li>Handle empty search results gracefully</li>
</ul>

<h3 id="id_2-bookmark-management">2. Bookmark Management</h3>
<p>Implement a complete bookmarking system where users can save films with comments.</p>

<p><strong>Backend Requirements:</strong></p>
<ul>
  <li>Create a new <code class="language-plaintext highlighter-rouge">Bookmark</code> model with the following fields:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">bookmark_id</code> (primary key)</li>
      <li><code class="language-plaintext highlighter-rouge">film_id</code> (foreign key to <code class="language-plaintext highlighter-rouge">Film</code>)</li>
      <li><code class="language-plaintext highlighter-rouge">comment</code> (text field, optional)</li>
      <li><code class="language-plaintext highlighter-rouge">created_at</code> (timestamp)</li>
    </ul>
  </li>
  <li>Create the following API endpoints:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">POST /bookmarks</code> - Create a new bookmark (requires <code class="language-plaintext highlighter-rouge">film_id</code> and optional <code class="language-plaintext highlighter-rouge">comment</code>)</li>
      <li><code class="language-plaintext highlighter-rouge">GET /bookmarks</code> - Get all bookmarks (include film information)</li>
      <li><code class="language-plaintext highlighter-rouge">GET /bookmarks/{bookmark_id}</code> - Get a specific bookmark</li>
      <li><code class="language-plaintext highlighter-rouge">PUT /bookmarks/{bookmark_id}</code> - Update a bookmark’s comment</li>
      <li><code class="language-plaintext highlighter-rouge">DELETE /bookmarks/{bookmark_id}</code> - Delete a bookmark</li>
    </ul>
  </li>
</ul>

<p><strong>Frontend Requirements:</strong></p>
<ul>
  <li>Add a “Bookmark” button to each film in your display</li>
  <li>Create a bookmarks page that lists all saved bookmarks</li>
  <li>Allow users to add/edit comments when creating or updating bookmarks</li>
  <li>Allow users to delete bookmarks with confirmation</li>
</ul>

<h3 id="id_3-testing">3. Testing</h3>
<p>Write comprehensive tests for all your API endpoints.</p>

<p><strong>Requirements:</strong></p>
<ul>
  <li>Create a <code class="language-plaintext highlighter-rouge">tests/</code> directory in your <code class="language-plaintext highlighter-rouge">backend</code> folder</li>
  <li>Use <code class="language-plaintext highlighter-rouge">pytest</code> and <code class="language-plaintext highlighter-rouge">pytest-asyncio</code> for testing</li>
  <li>Write tests for:
    <ul>
      <li>All GET endpoints (test successful responses and error cases)</li>
      <li>All POST endpoints (test successful creation and validation errors)</li>
      <li>All PUT endpoints (test successful updates and error cases)</li>
      <li>All DELETE endpoints (test successful deletion and error cases)</li>
    </ul>
  </li>
  <li>Test at least 3-5 endpoints with multiple test cases each</li>
  <li>Run tests with: <code class="language-plaintext highlighter-rouge">poetry run pytest</code></li>
</ul>

<h3 id="id_4-code-quality">4. Code Quality</h3>
<p>Ensure your Python code follows best practices.</p>

<p><strong>Requirements:</strong></p>
<ul>
  <li>Install and configure:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">black</code> - for code formatting</li>
      <li><code class="language-plaintext highlighter-rouge">isort</code> - for import sorting</li>
      <li><code class="language-plaintext highlighter-rouge">flake8</code> or <code class="language-plaintext highlighter-rouge">ruff</code> - for linting</li>
    </ul>
  </li>
  <li>Format your code: <code class="language-plaintext highlighter-rouge">poetry run black .</code></li>
  <li>Sort imports: <code class="language-plaintext highlighter-rouge">poetry run isort .</code></li>
  <li>Fix any linting errors: <code class="language-plaintext highlighter-rouge">poetry run flake8 .</code> (or <code class="language-plaintext highlighter-rouge">ruff check .</code>)</li>
  <li>Add these tools to your <code class="language-plaintext highlighter-rouge">pyproject.toml</code> as dev dependencies</li>
</ul>

<h3 id="id_5-cicd-pipeline">5. CI/CD Pipeline</h3>
<p>Set up GitHub Actions to automatically test and deploy your application.</p>

<p><strong>Requirements:</strong></p>
<ul>
  <li>Create a <code class="language-plaintext highlighter-rouge">.github/workflows/ci.yml</code> file that:
    <ul>
      <li>Runs on every push and pull request</li>
      <li>Sets up Python and installs dependencies</li>
      <li>Runs your test suite</li>
      <li>Runs code formatting/linting checks</li>
      <li>(Optional) Builds and deploys your application to a server</li>
    </ul>
  </li>
</ul>

<p><strong>Deployment:</strong></p>
<ul>
  <li>Deploy your application to a cloud service (e.g., Render, Railway, Fly.io, or a VPS)</li>
  <li>Ensure both your backend API and frontend are accessible</li>
  <li>Update your frontend to use the deployed API URL instead of <code class="language-plaintext highlighter-rouge">localhost:8000</code></li>
  <li>Document your deployment process in a <code class="language-plaintext highlighter-rouge">DEPLOYMENT.md</code> file</li>
</ul>

<h3 id="id_submission-checklist">Submission Checklist</h3>

<p>Before submitting, ensure you have:</p>

<ul class="checkbox-list">
  <li>Search functionality working (genre, year, keyword)</li>
  <li>All bookmark CRUD operations working (create, read, update, delete)</li>
  <li>Tests written and passing for at least 3-5 endpoints</li>
  <li>Code formatted with <code class="language-plaintext highlighter-rouge">black</code> and imports sorted with <code class="language-plaintext highlighter-rouge">isort</code></li>
  <li>Linting errors fixed</li>
  <li>GitHub Actions CI pipeline set up and passing</li>
  <li>Application deployed and accessible online</li>
  <li><code class="language-plaintext highlighter-rouge">DEPLOYMENT.md</code> file documenting your deployment process</li>
</ul>



            </article>  
        </main>
        <footer>
            <p>    
                Department of Computer Science, UNC Asheville
            </p>
        </footer>
        
        <script type="text/javascript" src="/fall2025/assets/js/main.js"></script>

<!-- <script>
    //little bit of a hack:
    const scrollLeft = () => {
        //console.log('scrollLeft');
        document.documentElement.scrollLeft = 0;
    };
    setTimeout(scrollLeft, 100);
</script> -->
        
        <script>
            window.h_max = "5";
        </script>
        
        <script type="text/javascript" src="/fall2025/assets/js/scrollspy.js"></script>
        <script type="text/javascript" src="/fall2025/assets/js/expandable.js"></script>
    </body>
</html>